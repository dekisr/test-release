on:
  pull_request:
    branches:
      - stage
    types: [opened, synchronize]
name: release-stage
jobs:
  release-stage:
    runs-on: ubuntu-latest
    steps:
      - name: 'Checkout repository'
        uses: actions/checkout@v3
        with:
          ref: ${GITHUB_HEAD_REF}

      - name: 'Bump and commit alpha release'
        run: |
          git config --global user.email "github@eskolare.com.br"
          git config --global user.name "eskobot"
          npx standard-version --prerelease alpha --skip.changelog --no-verify

      - name: 'Push'
        run: git push origin HEAD:${GITHUB_HEAD_REF}